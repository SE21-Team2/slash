(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{13:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),s=n(14),r=n.n(s),a=n(4),j=n(7),o=n(3),l=n(0),u=n(15),h=n(6),d=n.n(h),b=n(8);function O(e,t){return e=parseFloat(e),"inr"===t?"\u20b9"+(75*e).toFixed(2):"euro"===t?"\u20ac"+(1.16*e).toFixed(2):"aud"===t?"$"+(1.34*e).toFixed(2):"yuan"===t?"\xa5"+(6.4*e).toFixed(2):"yen"===t?"\xa5"+(114.21*e).toFixed(2):"pound"===t?"\xa3"+(.74*e).toFixed(2):"$"+e.toFixed(2)}var x=n(1);var p=function(e){var t=e.item,n=e.currency,c=e.wishlist,i=e.onAddToWishlist,s=e.onRemoveFromWishlist;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("div",{className:"item-img-container",children:Object(x.jsx)("img",{alt:t.title,src:t.img_link})})}),Object(x.jsx)("td",{className:"name-td",children:Object(x.jsx)("a",{href:t.link,children:t.title})}),Object(x.jsx)("td",{children:O(t.price,n)}),Object(x.jsx)("td",{children:t.website}),Object(x.jsx)("td",{children:t.rating}),c&&Object(x.jsx)("td",{children:c.some((function(e){return e.link===t.link}))?Object(x.jsx)("button",{onClick:function(){return s(t)},children:"Remove from wish list"}):Object(x.jsx)("button",{onClick:function(){return i(t)},children:"Add to wish list"})})]})},m=function(e){var t=e.items,n=e.currency,i=e.userLoggedIn,s=Object(c.useState)(),r=Object(a.a)(s,2),j=r[0],o=r[1];function l(){i&&fetch("/wishlist?user=".concat(i)).then((function(e){return e.json()})).then(o)}function u(e){return h.apply(this,arguments)}function h(){return(h=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/wishlistAdd",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:i,item:t})});case 2:l();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){return m.apply(this,arguments)}function m(){return(m=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/wishlistRemove",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:i,item:t})});case 2:l();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){l()}),[i]),console.log(j),Object(x.jsxs)("table",{className:"item-table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Image"}),Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"Source"}),Object(x.jsx)("th",{children:"Rating"})]})}),Object(x.jsx)("tbody",{children:t.map((function(e){return Object(x.jsx)(p,{item:e,currency:n,wishlist:i&&j,onAddToWishlist:u,onRemoveFromWishlist:O},e.link)}))})]})},g=function(e){var t=e.currency,n=e.setCurrency;return Object(x.jsxs)("div",{className:"option",children:[Object(x.jsx)("h4",{children:"Currency:"}),Object(x.jsxs)("select",{value:t,onChange:function(e){return n(e.target.value)},children:[Object(x.jsx)("option",{value:"usd",children:"US Dollar"}),Object(x.jsx)("option",{value:"inr",children:"Indian Rupee"}),Object(x.jsx)("option",{value:"euro",children:"Euro"}),Object(x.jsx)("option",{value:"aud",children:"Australian Dollar"}),Object(x.jsx)("option",{value:"yuan",children:"Yuan"}),Object(x.jsx)("option",{value:"yen",children:"Yen"}),Object(x.jsx)("option",{value:"pound",children:"British Pound"})]})]})};n(22);var f=function(e){var t=e.userLoggedIn,n=Object(c.useState)(),i=Object(a.a)(n,2),s=i[0],r=i[1],j=Object(c.useState)(""),o=Object(a.a)(j,2),h=o[0],d=o[1],b=Object(c.useState)(10),O=Object(a.a)(b,2),p=O[0],f=O[1],v=Object(c.useState)("relevance-asc"),y=Object(a.a)(v,2),S=y[0],w=y[1],N=Object(c.useState)("usd"),k=Object(a.a)(N,2),C=k[0],I=k[1];return Object(x.jsxs)("div",{children:[Object(x.jsx)("h2",{children:"Search For Items"}),Object(x.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==h.trim()){var t=S.split("-"),n=Object(a.a)(t,2),c=n[0],i=n[1],s=new URLSearchParams({name:h,numProducts:p,sortBy:c,displayOrder:i});fetch("/search?"+s.toString()).then((function(e){return e.json()})).then(r)}},children:[Object(x.jsxs)("div",{id:"options-group",children:[Object(x.jsxs)("div",{className:"option",children:[Object(x.jsx)("h4",{children:"Number of products:"}),Object(x.jsx)("input",{type:"number",min:"0",value:p,onChange:function(e){return f(e.target.value)}})]}),Object(x.jsxs)("div",{className:"option",children:[Object(x.jsx)("h4",{children:"Sort By:"}),Object(x.jsxs)("select",{value:S,onChange:function(e){return w(e.target.value)},children:[Object(x.jsx)("option",{value:"relevance-asc",children:"Relevance"}),Object(x.jsx)("option",{value:"rating-desc",children:"Rating (high to low)"}),Object(x.jsx)("option",{value:"rating-asc",children:"Rating (low to high)"}),Object(x.jsx)("option",{value:"price-desc",children:"Price (high to low)"}),Object(x.jsx)("option",{value:"price-asc",children:"Price (low to high)"})]})]}),Object(x.jsx)(g,{currency:C,setCurrency:I})]}),Object(x.jsxs)("div",{id:"search",children:[Object(x.jsxs)("div",{className:"icon-text-container",id:"search-text-container",children:[Object(x.jsx)(l.b.Provider,{value:{className:"text-icon"},children:Object(x.jsx)(u.a,{})}),Object(x.jsx)("input",{id:"search-text",type:"text",size:"60",value:h,onChange:function(e){return d(e.target.value)}})]}),Object(x.jsx)("input",{type:"submit",value:"Search"})]})]}),s&&Object(x.jsx)("hr",{}),s&&Object(x.jsx)(m,{items:s,currency:C,userLoggedIn:t})]})},v=n(9),y=n(10);n(13);var S=function(e){var t=e.onSetUserLoggedIn,n=Object(c.useState)(),s=Object(a.a)(n,2),r=s[0],u=s[1],h=Object(c.useState)(),O=Object(a.a)(h,2),p=O[0],m=O[1],g=Object(c.useState)(!1),f=Object(a.a)(g,2),S=f[0],w=f[1],N=Object(o.f)();function k(){return(k=Object(b.a)(d.a.mark((function e(n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:p})}).then((function(e){return e.json()}));case 3:c=e.sent,c.valid?(t(r),N("/")):w(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsxs)(i.a.Fragment,{children:[S&&Object(x.jsx)("p",{style:{color:"#800"},children:"Invalid login credentials"}),Object(x.jsx)("h2",{children:"Log In"}),Object(x.jsxs)("form",{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(x.jsx)("h4",{children:"Username"}),Object(x.jsxs)("div",{className:"icon-text-container",children:[Object(x.jsx)(l.b.Provider,{value:{className:"text-icon"},children:Object(x.jsx)(v.a,{})}),Object(x.jsx)("input",{type:"text",size:"30",onChange:function(e){return u(e.target.value)}})]}),Object(x.jsx)("h4",{children:"Password"}),Object(x.jsxs)("div",{className:"icon-text-container",children:[Object(x.jsx)(l.b.Provider,{value:{className:"text-icon"},children:Object(x.jsx)(y.a,{})}),Object(x.jsx)("input",{type:"password",size:"30",onChange:function(e){return m(e.target.value)}})]}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"submit",className:"login-signup-button",value:"Log In"})]}),Object(x.jsxs)("h4",{children:["Don't have an account? ",Object(x.jsx)(j.b,{to:"/signuppage",className:"login-signup-link",children:"Sign Up"})]})]})};var w=function(e){var t=e.item,n=e.currency,c=e.onRemoveFromWishlist;return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("div",{className:"item-img-container",children:Object(x.jsx)("img",{alt:t.title,src:t.img_link})})}),Object(x.jsx)("td",{className:"name-td",children:Object(x.jsx)("a",{href:t.link,children:t.title})}),Object(x.jsx)("td",{children:O(t.price,n)}),Object(x.jsx)("td",{children:t.website}),Object(x.jsx)("td",{children:t.rating}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{onClick:function(){return c(t)},children:"Remove from wish list"})})]})},N=function(e){var t=e.userLoggedIn,n=Object(c.useState)(null),s=Object(a.a)(n,2),r=s[0],j=s[1],o=Object(c.useState)("usd"),l=Object(a.a)(o,2),u=l[0],h=l[1];function d(e){fetch("/wishlistRemove",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:t,item:e})}),j(r.filter((function(t){return t.link!==e.link})))}return Object(c.useEffect)((function(){fetch("/wishlist?user=".concat(t)).then((function(e){return e.json()})).then(j)}),[t]),null===r?Object(x.jsx)("h3",{children:"Loading wishlist..."}):Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)("h2",{children:"Wish List"}),0===r.length?Object(x.jsx)("h3",{children:"Wish List is empty"}):Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)(g,{currency:u,setCurrency:h}),Object(x.jsxs)("table",{className:"item-table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Image"}),Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("th",{children:"Price"}),Object(x.jsx)("th",{children:"Source"}),Object(x.jsx)("th",{children:"Rating"})]})}),Object(x.jsx)("tbody",{children:r.map((function(e){return Object(x.jsx)(w,{item:e,currency:u,onRemoveFromWishlist:d},e.link)}))})]})]})]})};n(23);var k=function(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],s=t[1],r=Object(c.useState)(),u=Object(a.a)(r,2),h=u[0],O=u[1],p=Object(c.useState)(!1),m=Object(a.a)(p,2),g=m[0],f=m[1],S=Object(o.f)();function w(){return(w=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:h})}).then((function(e){return e.json()}));case 3:c=e.sent,c.valid?S("/loginpage"):f(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(x.jsxs)(i.a.Fragment,{children:[g&&Object(x.jsx)("p",{style:{color:"#800"},children:"A user with this user name already exists"}),Object(x.jsx)("h2",{children:"Sign Up"}),Object(x.jsxs)("form",{onSubmit:function(e){return w.apply(this,arguments)},children:[Object(x.jsx)("h4",{children:"Username"}),Object(x.jsxs)("div",{className:"icon-text-container",children:[Object(x.jsx)(l.b.Provider,{value:{className:"text-icon"},children:Object(x.jsx)(v.a,{})}),Object(x.jsx)("input",{type:"text",size:"30",onChange:function(e){return s(e.target.value)}})]}),Object(x.jsx)("h4",{children:"Password"}),Object(x.jsxs)("div",{className:"icon-text-container",children:[Object(x.jsx)(l.b.Provider,{value:{className:"text-icon"},children:Object(x.jsx)(y.a,{})}),Object(x.jsx)("input",{type:"password",size:"30",onChange:function(e){return O(e.target.value)}})]}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{type:"submit",className:"login-signup-button",value:"Sign Up"})]}),Object(x.jsxs)("h4",{children:["Already have an account? ",Object(x.jsx)(j.b,{to:"/loginpage",className:"login-signup-link",children:"Login"})]})]})};var C=function(){var e=function(){var e,t=Object(c.useState)(null===(e=JSON.parse(localStorage.getItem("user")))||void 0===e?void 0:e.UserLoggedIn),n=Object(a.a)(t,2),i=n[0],s=n[1];return[i,function(e){e?(localStorage.setItem("user",JSON.stringify(e)),s(e)):(localStorage.removeItem("user"),s(null))}]}(),t=Object(a.a)(e,2),n=t[0],s=t[1];return Object(x.jsxs)(j.a,{children:[Object(x.jsx)("div",{id:"top-right-links",children:n?Object(x.jsxs)(i.a.Fragment,{children:[Object(x.jsx)(j.b,{to:"/wishlistpage",children:"View Wishlist"}),Object(x.jsx)(j.b,{to:"#",onClick:function(){return s(null)},children:"Log Out"})]}):Object(x.jsx)(j.b,{to:"/loginpage",children:"Log In"})}),Object(x.jsx)("h1",{id:"slash-title",children:Object(x.jsx)(j.b,{to:"/",children:"SLASH"})}),Object(x.jsx)("main",{children:Object(x.jsxs)(o.c,{children:[Object(x.jsx)(o.a,{path:"/",element:Object(x.jsx)(f,{userLoggedIn:n})}),Object(x.jsx)(o.a,{path:"/wishlistpage",element:Object(x.jsx)(N,{userLoggedIn:n})}),Object(x.jsx)(o.a,{path:"/loginpage",element:Object(x.jsx)(S,{onSetUserLoggedIn:s})}),Object(x.jsx)(o.a,{path:"/signuppage",element:Object(x.jsx)(k,{})})]})})]})};n(24);r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(C,{})}),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.4aaa10e0.chunk.js.map